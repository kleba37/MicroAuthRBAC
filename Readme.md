# Microservice Authentication Operation APP with RBAC

> [!NOTE]
> Проект находится в стадии разработки 

## В микросервисе содержит свои Package реализации
- Dependency Injection
- Service Container
- Migration
- Middleware
- Testing
- Router

### DI
Позволяет добавлять инъекцию зависимости часто используемых такие, как экземпляр DB, Redis и т.д. при этом они будут существовать в единственном экземпляре в приложении.
> [!NOTE]
> Также имеет autoloader можно загружать зависимости автоматически есть пример с sql.DB
> Также можно на любом этапе выполнения приложения загрузить свою зависимость через DI.Register(&instance)

### Migrate
Добавлена команда cli для запуска миграций. Также реализована регистрация миграций

### Testing
Сделана инициализация приложения с запуском миграций, на этапе создания экземпляра TestingTools. Реализован функционал Rollback миграций. Для тестирования также используется свое окружение .env.testing, которое из коробки запускает базу in_memory а механизм StartTest() и EndTest() возволяют записывать данные в БД в рамках транзации и после выполнения теста откатывать эти данные что не раздувает базу и делает тесты в изоляции

### Middleware 
Реализован Middleware загрузчик, можно регистрировать миделваре путем перечисления в процессе создания экземпляра. Рекомендуется в качестве Apply миделваре использовать имеющийся middleware с Роутером

### Router
Удобный инструмент по направлению запросов. Запросы удобно связываются через мапу Routing где в качестве ключа роут, а в качестве значения указывается Обработчик

## Управление проектом производится через Makefile
Для запуска сервиса используй
```bash
make run
```

Для компиляции сервиса используй
```bash
make build
```

Для запуска тестов сервиса используй
```bash
make test
```

Для запуска миграций сервиса используй
```bash
make migrate
```

## Пример операции
```json
{
  ...
  "operation": "analytics.read",
  ...
}
```

## Планы по доработке
- Добавить/Удаление/Чтение ролей(добавить роуты, таблицы, контроллеры)
- Добавить/Удаление/Чтение операций(добавить роуты, таблицы, контроллеры)
- Добавить различные типы авторизации oAuth, JWT и т.д.
- Подумать возможно следует добавить контекст и в контекст перенести сервис контейнер и прокидывать контекст в проекте
